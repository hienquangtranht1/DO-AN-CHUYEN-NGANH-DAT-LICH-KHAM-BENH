@model BookinhMVC.Models.BenhNhan
@{
    Layout = "_AdminLayout";
    ViewBag.Active = "Patients";
    ViewBag.Title = "Xác nhận Xóa Bệnh nhân";
}

@section Styles {
    <style>
        /* Định nghĩa màu chủ đạo */
        :root {
            --primary-main: #667eea; /* Xanh Tím */
            --danger-alert: #f8d7da; /* Nền cảnh báo nhẹ */
            --danger-text: #842029; /* Chữ cảnh báo */
            --danger-border: #f5c2c7;
        }

        /* Thẻ Card chứa thông tin */
        .card-delete-info {
            border-left: 5px solid #dc3545; /* Đỏ mạnh */
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .card-header-delete {
            background-color: var(--danger-border); /* Màu nền nhẹ, đồng bộ với cảnh báo */
            color: var(--danger-text);
            font-weight: 700;
            font-size: 1.1rem;
        }

        /* Thông báo Cảnh báo */
        .alert-danger-custom {
            background-color: var(--danger-alert);
            color: var(--danger-text);
            border: 1px solid var(--danger-border);
            border-radius: 10px;
        }

            .alert-danger-custom .alert-heading {
                color: var(--danger-text);
                font-weight: 700;
            }

        /* Các nút hành động */
        .btn-delete-confirm {
            background-color: #dc3545;
            border-color: #dc3545;
            font-weight: 600;
            transition: all 0.3s ease;
            padding: 12px 30px;
        }

            .btn-delete-confirm:hover {
                background-color: #c82333;
                border-color: #bd2130;
                box-shadow: 0 4px 15px rgba(220, 53, 69, 0.4);
                transform: translateY(-2px);
            }

        .btn-secondary {
            font-weight: 600;
        }

        /* Hiển thị thông tin */
        .dl-horizontal dt {
            font-weight: 600;
            color: #495057;
        }

        /* Mã bệnh nhân nổi bật */
        .patient-highlight {
            font-size: 1.1rem;
            color: #dc3545; /* Màu đỏ */
            font-weight: 700;
        }
    </style>
}

<div class="row justify-content-center">
    @* Căn giữa nội dung *@
    <div class="col-lg-8 col-md-10">

        <h2 class="mb-5 text-dark"><i class="fas fa-trash-alt me-3" style="color: #dc3545;"></i>**Xác nhận Xóa Bệnh nhân**</h2>

        <div class="alert alert-danger-custom shadow-lg p-4 mb-5" role="alert">
            <h4 class="alert-heading"><i class="fas fa-exclamation-triangle me-2"></i>CẢNH BÁO NGUY HIỂM!</h4>
            <p>
                Bạn có **chắc chắn** muốn xóa hồ sơ Bệnh nhân **@Model.HoTen** (@Model.MaBenhNhan) khỏi hệ thống không?
            </p>
            <hr>
            <p class="mb-0">
                Thao tác này sẽ **XÓA VĨNH VIỄN** và **không thể hoàn tác**. Hãy đảm bảo bạn đã sao lưu hoặc xác minh rằng việc xóa sẽ không làm hỏng dữ liệu liên quan khác (Lịch hẹn, Đánh giá, v.v.).
            </p>
        </div>

        <div class="card card-delete-info mb-5">
            <div class="card-header card-header-delete">
                <i class="fas fa-user-times me-1"></i> Thông tin Bệnh nhân đang được xử lý
            </div>
            <div class="card-body">
                <dl class="row dl-horizontal">
                    <dt class="col-sm-4">Mã Bệnh nhân (ID):</dt>
                    <dd class="col-sm-8 patient-highlight">#@Model.MaBenhNhan</dd>

                    <dt class="col-sm-4">Họ và tên:</dt>
                    <dd class="col-sm-8"><span class="patient-highlight">@Model.HoTen</span></dd>

                    <dt class="col-sm-4">Ngày sinh:</dt>
                    @* Đã sửa lỗi CS1061: Dùng so sánh với DateTime.MinValue thay vì .HasValue *@
                    <dd class="col-sm-8">
                        @(
                                                Model.NgaySinh.HasValue
                                                ? Model.NgaySinh.Value.ToString("dd/MM/yyyy")
                                                : "Chưa có"
                                                )
                    </dd>

                    <dt class="col-sm-4">Giới tính:</dt>
                    <dd class="col-sm-8">@Model.GioiTinh</dd>

                    <dt class="col-sm-4">Số điện thoại:</dt>
                    <dd class="col-sm-8">@Model.SoDienThoai</dd>
                </dl>
            </div>
        </div>

        <form asp-action="DeletePatient" asp-route-id="@Model.MaBenhNhan" method="post" class="d-flex justify-content-end">
            @* Dùng name="id" để khớp với tham số trong DeletePatientConfirmed(int id) *@
            <input type="hidden" name="id" value="@Model.MaBenhNhan" />

            <a href="/Admin/Patients" class="btn btn-secondary btn-lg me-3">
                <i class="fas fa-arrow-left me-1"></i> Quay lại / Hủy
            </a>

            <button type="submit" class="btn btn-delete-confirm btn-lg">
                <i class="fas fa-check me-1"></i> **XÁC NHẬN XÓA VĨNH VIỄN**
            </button>
        </form>

    </div>
</div>