@* File: Views/Home/Cardiology.cshtml *@
@{
    ViewData["Title"] = "Tim Mạch - Four Rock";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var doctors = Model as IEnumerable<BookinhMVC.Models.BacSi>;
}

<section class="blog-header fade-in" data-aos="fade-down" style="background-image: url('/images/background.png'); background-size: cover; background-position: center; position: relative; min-height: 300px; display: flex; flex-direction: column;">
    <div class="container position-relative z-2 flex-grow-1 d-flex align-items-center justify-content-center text-center">
        <div>
            <h1 class="display-4 fw-bold text-dark mb-2">
                <i class="fas fa-book-medical me-3"></i>Tim mạch
            </h1>
            <p class="lead text-secondary">Giải pháp toàn diện cho sức khỏe tim mạch của bạn</p>
        </div>
    </div>

    <div class="breadcrumb-section position-absolute bottom-0 w-100 py-3 z-3">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-0 justify-content-center">
                    <li class="breadcrumb-item"><a href="/" class="text-dark text-decoration-none"><i class="fas fa-home me-1"></i>Trang chủ</a></li>
                    <li class="breadcrumb-item active text-dark" aria-current="page"><i class="fas fa-heartbeat me-1"></i>Blog Y Tế</li>
                </ol>
            </nav>
        </div>
    </div>
</section>

<section id="service-intro" class="py-5 bg-white">
    <div class="container">
        <div class="section-header text-center mb-5" data-aos="fade-up">
            <h2 class="display-5 fw-bold mb-2">
                <i class="fas fa-info-circle text-primary me-2"></i>Giới thiệu dịch vụ
            </h2>
            <div class="header-line mx-auto"></div>
        </div>

        <div class="row align-items-center">
            <div class="col-md-6 mb-4 mb-md-0 d-flex justify-content-center" data-aos="fade-right">
                <img src="~/images/timmach.png" alt="Dịch vụ Tim Mạch" class="img-fluid rounded-4 shadow-lg" style="width: 500px; height:100%" />
            </div>
            <div class="col-md-6" data-aos="fade-left">
                <h3 class="fw-bold text-primary mb-3">Định hướng chăm sóc tim mạch</h3>
                <p class="text-secondary fs-5">Tại **Four Rock**, chúng tôi áp dụng công nghệ chẩn đoán hình ảnh tiên tiến và các phương pháp can thiệp hiện đại để mang lại giải pháp toàn diện cho các bệnh lý tim mạch phức tạp. Dịch vụ của chúng tôi bao gồm:</p>
                <ul class="list-unstyled text-secondary fs-6">
                    <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Khám và kiểm tra chức năng tim bằng **siêu âm Doppler** và **EKG**.</li>
                    <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Phân tích và chẩn đoán các bệnh van tim, mạch vành, và rối loạn nhịp tim.</li>
                    <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Hỗ trợ tư vấn điều trị và theo dõi dài hạn cho bệnh nhân tim mạch mãn tính.</li>
                </ul>
                <p class="text-secondary">Quá trình chăm sóc được thực hiện bởi đội ngũ bác sĩ chuyên khoa tim mạch hàng đầu, đảm bảo sự an tâm tuyệt đối cho bệnh nhân.</p>
            </div>
        </div>
    </div>
</section>

<section id="process" class="py-5 bg-light">
    <div class="container">
        <div class="section-header text-center mb-5" data-aos="fade-up">
            <h2 class="display-5 fw-bold mb-2">
                <i class="fas fa-steps text-primary me-2"></i>Quy trình chăm sóc tim mạch
            </h2>
            <div class="header-line mx-auto"></div>
        </div>

        <div class="row g-4">
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
                <div class="card h-100 shadow-sm border-0 rounded-4 process-card">
                    <div class="card-body p-4 text-center">
                        <i class="fas fa-notes-medical fa-5x mb-3 text-primary"></i>
                        <h4 class="card-title text-primary">Bước 1: Khám & Đánh giá</h4>
                        <p class="card-text text-secondary">Đánh giá tiền sử bệnh lý và các dấu hiệu bất thường ban đầu.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
                <div class="card h-100 shadow-sm border-0 rounded-4 process-card">
                    <div class="card-body p-4 text-center">
                        <i class="fas fa-heartbeat fa-5x mb-3 text-primary"></i>
                        <h4 class="card-title text-primary">Bước 2: Chẩn đoán Chuyên sâu</h4>
                        <p class="card-text text-secondary">Thực hiện EKG, siêu âm tim, hoặc chụp mạch để xác định chính xác tình trạng.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
                <div class="card h-100 shadow-sm border-0 rounded-4 process-card">
                    <div class="card-body p-4 text-center">
                        <i class="fas fa-hand-holding-heart fa-5x mb-3 text-primary"></i>
                        <h4 class="card-title text-primary">Bước 3: Điều trị & Theo dõi</h4>
                        <p class="card-text text-secondary">Thiết lập phác đồ điều trị, can thiệp nếu cần, và tư vấn chăm sóc dài hạn.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="doctors" class="py-5 bg-white">
    <div class="container">
        <div class="section-header text-center mb-5" data-aos="fade-up">
            <h2 class="display-5 fw-bold mb-2">
                <i class="fas fa-user-md text-primary me-2"></i>Đội ngũ Chuyên gia Tim Mạch
            </h2>
            <div class="header-line mx-auto"></div>
        </div>

        <div class="row g-4 justify-content-center">
            @if (doctors != null && doctors.Any())
            {
                var cardiologyDoctors = doctors.Where(d => d.Khoa != null && d.Khoa.TenKhoa == "Tim mạch");

                if (cardiologyDoctors.Any())
                {
                    foreach (var doctor in cardiologyDoctors)
                    {
                        <div class="col-lg-4 col-md-6" data-aos="fade-up">
                            <div class="card h-100 shadow-sm border-0 rounded-4 doctor-card text-center">
                                <img src="@(string.IsNullOrEmpty(doctor.HinhAnhBacSi) ? Url.Content("~/images/doctors/default.jpg") : Url.Content("~/uploads/" + doctor.HinhAnhBacSi))"
                                     alt="@doctor.HoTen" class="card-img-top mx-auto mt-3 rounded-circle border border-5 border-light"
                                     style="width: 150px; height: 150px; object-fit: cover;">
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title fw-bold text-primary mb-1">@doctor.HoTen</h5>
                                    <p class="text-secondary mb-2">@doctor.Khoa?.TenKhoa</p>

                                    @* ĐÃ SỬA: Render HTML từ TinyMCE *@
                                    <div class="card-text small text-muted flex-grow-1 doctor-description">
                                        @Html.Raw(doctor.MoTa)
                                    </div>

                                    <a asp-controller="User" asp-action="Register" class="btn btn-sm btn-outline-primary mt-3 rounded-pill">
                                        <i class="fas fa-calendar-alt me-1"></i> Đặt lịch ngay
                                    </a>
                                </div>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <div class="col-12 text-center text-muted">
                        <p><i class="fas fa-exclamation-circle me-2"></i>Hiện chưa có bác sĩ chuyên khoa Tim Mạch nào được liệt kê trong dữ liệu này.</p>
                        <a asp-controller="Home" asp-action="Contact" class="btn btn-primary rounded-pill">Liên hệ tư vấn</a>
                    </div>
                }
            }
            else
            {
                <div class="col-12 text-center text-muted">
                    <p><i class="fas fa-exclamation-circle me-2"></i>Không thể tải dữ liệu bác sĩ. Vui lòng kiểm tra lại Controller.</p>
                    <a asp-controller="Home" asp-action="Contact" class="btn btn-primary rounded-pill">Liên hệ tư vấn</a>
                </div>
            }
        </div>
    </div>
</section>

<section id="benefits" class="py-5 bg-light">
    <div class="container">
        <div class="section-header text-center mb-5" data-aos="fade-up">
            <h2 class="display-5 fw-bold mb-2">
                <i class="fas fa-heart text-primary me-2"></i>Lợi ích dịch vụ
            </h2>
            <div class="header-line mx-auto"></div>
        </div>

        <div class="row justify-content-center">
            <div class="col-lg-8" data-aos="zoom-in">
                <ul class="list-group list-group-flush shadow-lg rounded-4 overflow-hidden">
                    <li class="list-group-item d-flex align-items-center py-3 px-4 bg-white fw-medium"><i class="fas fa-check-circle text-success me-3 fs-5"></i>Phát hiện sớm các vấn đề tim mạch tiềm ẩn như xơ vữa động mạch.</li>
                    <li class="list-group-item d-flex align-items-center py-3 px-4 bg-light"><i class="fas fa-check-circle text-success me-3 fs-5"></i>Theo dõi và điều trị hiệu quả các bệnh lý tim mạch phức tạp.</li>
                    <li class="list-group-item d-flex align-items-center py-3 px-4 bg-white fw-medium"><i class="fas fa-check-circle text-success me-3 fs-5"></i>Tiếp cận phác đồ điều trị cá nhân hóa từ chuyên gia.</li>
                    <li class="list-group-item d-flex align-items-center py-3 px-4 bg-light"><i class="fas fa-check-circle text-success me-3 fs-5"></i>Tăng cường sức khỏe tim mạch và cải thiện chất lượng cuộc sống.</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section id="cta" class="py-5 text-white text-center transition-all" data-aos="zoom-in" style="background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);">
    <div class="container">
        <h2 class="fw-bold mb-3 text-white"><i class="fas fa-calendar-check me-2"></i>Đăng ký khám tim mạch ngay hôm nay!</h2>
        <p class="lead mb-4 text-white-50">Sức khỏe tim mạch là ưu tiên hàng đầu. Hãy đặt lịch để được khám và tư vấn bởi các chuyên gia hàng đầu.</p>
        <a asp-controller="User" asp-action="Register" class="btn btn-warning btn-lg fw-bold text-dark rounded-pill shadow-lg transition-all">
            <i class="fas fa-user-plus me-2"></i>Đăng ký và Đặt lịch
        </a>
    </div>
</section>

<style>
    :root {
        --primary-color: #0d6efd;
        --secondary-color: #6c757d;
        --accent-color: #0dcaf0;
        --success-color: #198754;
        --text-dark: #212529;
        --light-gray: #f8f9fa;
    }

    .section-header {
        margin-bottom: 3rem;
    }

        .section-header h2 {
            color: var(--text-dark);
            font-weight: 700;
            font-size: 2.5rem;
        }

    .header-line {
        width: 80px;
        height: 4px;
        background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
        border-radius: 2px;
        margin-top: 10px;
    }

    .blog-header {
        position: relative;
        min-height: 250px !important;
        padding-bottom: 2rem;
    }

    .process-card {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border: 1px solid var(--light-gray) !important;
    }

        .process-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(13, 110, 253, 0.15) !important;
        }

        .process-card i {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

    #benefits .list-group-item {
        transition: all 0.2s;
        border: none;
        border-radius: 0;
    }

        #benefits .list-group-item:hover {
            transform: translateX(3px);
        }

    .doctor-card {
        padding: 1.5rem;
        transition: all 0.3s ease;
        border: 1px solid #e9ecef !important;
    }

        .doctor-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 24px rgba(13, 110, 253, 0.15) !important;
        }

    /* ĐÃ THÊM: Style cho nội dung TinyMCE */
    .doctor-description {
        text-align: left;
        overflow: hidden;
        max-height: 200px;
        overflow-y: auto;
    }

        .doctor-description p {
            margin-bottom: 0.5rem;
            line-height: 1.6;
        }

        .doctor-description ul,
        .doctor-description ol {
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .doctor-description strong {
            color: var(--primary-color);
            font-weight: 600;
        }

        .doctor-description a {
            color: var(--primary-color);
            text-decoration: underline;
        }

        /* Scrollbar cho mô tả dài */
        .doctor-description::-webkit-scrollbar {
            width: 5px;
        }

        .doctor-description::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .doctor-description::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }

    @@media (max-width: 768px) {
        .blog-header

    {
        min-height: 220px !important;
    }

    .section-header h2 {
        font-size: 2rem;
    }

    .doctor-description {
        max-height: 150px;
    }

    }
</style>

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
        AOS.init({
            duration: 800,
            once: true,
            offset: 50
        });
    </script>
}